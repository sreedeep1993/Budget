<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Budget Tracker</title>

<!-- Favicon & PWA -->
<link rel="icon" type="image/png" href="icon-192.png">
<link rel="apple-touch-icon" sizes="180x180" href="icon-192.png">
<link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#A3BFF0">

<!-- Chart.js -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<style>
/* Reset */
* { box-sizing:border-box; margin:0; padding:0; }
body {
  font-family:'Helvetica Neue',Arial,sans-serif;
  background: linear-gradient(135deg,#d9e6f2,#f0f4f9);
  color: #333;
  min-height: 100vh;
  display:flex;
  justify-content:center;
  align-items:flex-start;
  padding: 20px 0;
}

/* App container */
.app {
  width: 100%;
  max-width: 480px;
  display:flex;
  flex-direction:column;
}

/* Glass Header */
header {
  background: rgba(255,255,255,0.3);
  backdrop-filter: blur(20px) saturate(180%);
  color: #1a1a1a;
  padding:25px 20px;
  text-align:center;
  border-radius:20px;
  margin-bottom:15px;
  box-shadow:0 8px 32px rgba(0,0,0,0.08);
}
header h2 { font-weight:600; font-size:24px; }
.balance { font-size:32px; font-weight:700; margin-top:5px; }

/* Summary Boxes */
.summary { display:flex; justify-content:space-between; margin-bottom:15px; }
.box {
  flex:1; margin:0 5px;
  background: rgba(255,255,255,0.25);
  backdrop-filter: blur(20px) saturate(180%);
  text-align:center;
  padding:15px 0;
  border-radius:20px;
  box-shadow:0 8px 32px rgba(0,0,0,0.08);
}
.box h4 { font-weight:500; margin-bottom:5px; color:#555; }
.box p { font-weight:600; font-size:18px; color:#1a1a1a; }

/* Form */
.form {
  background: rgba(255,255,255,0.25);
  backdrop-filter: blur(20px) saturate(180%);
  padding:20px;
  margin:0 15px 15px;
  border-radius:20px;
  box-shadow:0 8px 32px rgba(0,0,0,0.08);
}
.form h3 { margin-bottom:15px; font-weight:500; color:#555; }
input, select, button {
  width:100%; padding:12px; margin:8px 0; font-size:16px; border-radius:15px; border:none; outline:none;
  background: rgba(255,255,255,0.35); color:#1a1a1a; backdrop-filter: blur(5px);
}
input::placeholder, select { color:#666; }
button {
  background: rgba(163,191,240,0.6);
  color: #1a1a1a;
  font-weight:600; cursor:pointer;
  transition:0.3s;
}
button:hover { background: rgba(163,191,240,0.85); }

/* Transactions */
.transactions { padding:0 15px; margin-bottom:15px; }
.transactions h3 { margin-bottom:15px; font-weight:500; color:#555; }
.transaction {
  display:flex; justify-content:space-between; align-items:center;
  background: rgba(255,255,255,0.25);
  backdrop-filter: blur(15px) saturate(180%);
  padding:12px 15px; margin-bottom:10px; border-radius:20px;
  box-shadow:0 4px 20px rgba(0,0,0,0.05);
}
.transaction .tag { background: rgba(163,191,240,0.35); padding:3px 8px; border-radius:12px; font-size:12px; margin-top:4px; display:inline-block; }
.income { border-left:4px solid #4CD964; }
.expense { border-left:4px solid #FF3B30; }
.delete-btn {
  background: rgba(255,59,48,0.3); color:#1a1a1a; border:none; padding:5px 10px; border-radius:12px; cursor:pointer; font-size:12px;
  transition:0.3s;
}
.delete-btn:hover { background: rgba(255,59,48,0.6); }

/* Charts */
.charts {
  margin:0 15px 20px; padding:20px;
  background: rgba(255,255,255,0.25);
  backdrop-filter: blur(20px) saturate(180%);
  border-radius:20px; box-shadow:0 8px 32px rgba(0,0,0,0.08);
}
canvas { width:100% !important; max-height:300px; margin-top:10px; }
</style>
</head>

<body>
<div class="app">

<header>
  <h2>ðŸ’¶ Budget Tracker</h2>
  <div class="balance" id="balance">â‚¬0.00</div>
</header>

<div class="summary">
  <div class="box"><h4>Income</h4><p id="income">â‚¬0.00</p></div>
  <div class="box"><h4>Expenses</h4><p id="expense">â‚¬0.00</p></div>
</div>

<div class="form">
  <h3>Add Transaction</h3>
  <input type="text" id="text" placeholder="Description">
  <input type="number" id="amount" placeholder="Amount (â‚¬)">
  <select id="type" onchange="updateCategories()">
    <option value="income">Income</option>
    <option value="expense">Expense</option>
  </select>
  <select id="category"></select>
  <button onclick="addTransaction()">Add</button>
</div>

<div class="transactions">
  <h3>History</h3>
  <div id="list"></div>
</div>

<div class="charts">
  <h3>Monthly Overview</h3>
  <canvas id="incomeExpenseChart"></canvas>
  <canvas id="categoryChart"></canvas>
</div>

</div>

<script>
let transactions = JSON.parse(localStorage.getItem("transactions")) || [];
const incomeCategories=["Salary","Refunds","Interests","Other"];
const expenseCategories=["Rent","Transport","Grocery","Shopping","Parent Support","Financial Investments","Utilities","Subscriptions","Internet"];
const categoryShorts={"Salary":"SAL","Refunds":"REF","Interests":"INT","Other":"OTH","Rent":"RENT","Transport":"TRNS","Grocery":"GROC","Shopping":"SHOP","Parent Support":"PRNT","Financial Investments":"INV","Utilities":"UTIL","Subscriptions":"SUB","Internet":"NET"};

function updateCategories(){
    const type=document.getElementById("type").value;
    const select=document.getElementById("category");
    select.innerHTML="";
    const cats=type==="income"?incomeCategories:expenseCategories;
    cats.forEach(c=>{const opt=document.createElement("option"); opt.value=c; opt.textContent=c; select.appendChild(opt);});
}

function addTransaction(){
    const text=document.getElementById("text").value;
    const amount=document.getElementById("amount").value;
    const type=document.getElementById("type").value;
    const category=document.getElementById("category").value;
    if(!text||!amount){alert("Please fill all fields");return;}
    transactions.push({id:Date.now(),text,amount:+amount,type,category});
    saveData(); updateUI(); renderCharts();
    document.getElementById("text").value=""; document.getElementById("amount").value="";
}

function deleteTransaction(id){
    transactions = transactions.filter(t=>t.id!==id);
    saveData(); updateUI(); renderCharts();
}

function updateUI(){
    const list=document.getElementById("list"); list.innerHTML="";
    let income=0,expense=0;
    transactions.forEach(t=>{
        if(t.type==="income") income+=t.amount; else expense+=t.amount;
        const short=categoryShorts[t.category]||"OTH";
        const div=document.createElement("div"); div.classList.add("transaction",t.type);
        div.innerHTML=`<div><strong>${t.text}</strong><br><span class="tag">${short}</span></div>
        <div>â‚¬${t.amount.toFixed(2)}<button class="delete-btn" onclick="deleteTransaction(${t.id})">âœ–</button></div>`;
        list.appendChild(div);
    });
    const balance=income-expense;
    document.getElementById("income").innerText="â‚¬"+income.toFixed(2);
    document.getElementById("expense").innerText="â‚¬"+expense.toFixed(2);
    document.getElementById("balance").innerText="â‚¬"+balance.toFixed(2);
}

function saveData(){localStorage.setItem("transactions",JSON.stringify(transactions));}

// Charts
let incomeExpenseChart, categoryChart;
function renderCharts(){
    const categoryTotals={}; const monthlyTotals={};
    transactions.forEach(t=>{
        if(t.type==="expense"){categoryTotals[t.category]=(categoryTotals[t.category]||0)+t.amount;}
        const date=new Date(t.id);
        const month=`${date.getFullYear()}-${String(date.getMonth()+1).padStart(2,'0')}`;
        if(!monthlyTotals[month]) monthlyTotals[month]={income:0,expense:0};
        if(t.type==="income") monthlyTotals[month].income+=t.amount; else monthlyTotals[month].expense+=t.amount;
    });
    const months=Object.keys(monthlyTotals).sort();
    const incomes=months.map(m=>monthlyTotals[m].income);
    const expenses=months.map(m=>monthlyTotals[m].expense);

    const ctx1=document.getElementById('incomeExpenseChart').getContext('2d');
    if(incomeExpenseChart) incomeExpenseChart.destroy();
    incomeExpenseChart=new Chart(ctx1,{type:'bar',data:{labels:months,datasets:[{label:'Income',data:incomes,backgroundColor:'#4CD964'},{label:'Expenses',data:expenses,backgroundColor:'#FF3B30'}]},options:{responsive:true,plugins:{legend:{position:'top'}},scales:{y:{beginAtZero:true}}}});

    const catLabels=Object.keys(categoryTotals);
    const catData=catLabels.map(c=>categoryTotals[c]);
    const ctx2=document.getElementById('categoryChart').getContext('2d');
    if(categoryChart) categoryChart.destroy();
    categoryChart=new Chart(ctx2,{type:'doughnut',data:{labels:catLabels,datasets:[{data:catData,backgroundColor:['#A3BFF0','#6FA1F2','#4C8BE2','#2B6CC4','#90C3F7','#7AB8F5','#549EE1','#3C82D1','#1F66B1','#0F4C91']}]},options:{responsive:true,plugins:{legend:{position:'bottom'}}}});
}

// Initialize
updateCategories(); updateUI(); renderCharts();
</script>
</body>
</html>
